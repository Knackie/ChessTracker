<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<title>♟️Chess Tracker</title>
</head>

<body>
<div class="w3-bar w3-green">
<a href="index.html" class="w3-bar-item w3-button">Accueil</a>
<a href="/classement" class="w3-bar-item w3-button">Classement</a>
<a href="/historique" class="w3-bar-item w3-button">Historique</a>
<a href="https://github.com/Knackie/ChessTracker" class="w3-bar-item w3-button">Github</a>
</div>


<div id="Classement" class="classement">
<h1> Classement </h1>
<script>
   


function getByValue(map, searchValue) {
	for (let [key, value] of map.entries()) {
		if (value === searchValue)
			return key;
	}
}
fetch("https://raw.githubusercontent.com/Knackie/ChessTracker/main/matches.json")
.then(response => response.json())
.then(data => {
			var beginClassement;

			
			for (let i = 0; i < Object.keys(data.matches).length; i++) 
			{
				var joueur1;
				var joueur2;
					if (data.matches[i].winner == "Draw")
					{
						beginClassement = "Égalité de <a href='players/";
						beginClassement+= data.matches[i].white.name;
						beginClassement+= "'>"; 
						beginClassement+= data.matches[i].white.name;
						beginClassement+="</a>";
						console.log(joueur1);
						beginClassement += " avec les blancs contre <a href='players/";
						beginClassement+= data.matches[i].black.name;
						beginClassement+= "'>"; 
						beginClassement+= data.matches[i].black.name;
						beginClassement+="</a>";
					}
					else if ([data.matches[i].winner] != "Draw")
					{
						if (data.matches[i].winner == "white")
							{       
								beginClassement = "Victoire de <a href='players/";
								beginClassement+= data.matches[i].white.name;
								beginClassement+= "'>"; 
								beginClassement+= data.matches[i].white.name;
								beginClassement+="</a> avec les blancs contre <a href='players/";
								beginClassement += data.matches[i].black.name;
								beginClassement+= "'>"; 
								beginClassement+= data.matches[i].black.name;
								beginClassement+="</a>";
							}
							else
							{
								beginClassement = "Victoire de <a href='players/";
								beginClassement+= data.matches[i].black.name;
								beginClassement+= "'>"; 
								beginClassement+= data.matches[i].black.name;
								beginClassement+="</a> avec les blancs contre <a href='players/";
								beginClassement += data.matches[i].white.name;
								beginClassement+= "'>"; 
								beginClassement+= data.matches[i].white.name;
								beginClassement+="</a>";
							
							}
						}
							beginClassement += " le ";
							beginClassement += data.matches[i]._comment;
						

			var divId = "div" + i;
			console.log(joueur1);
			var divId = "div" + i;
			var tag = document.createElement(divId);
			
			var text = document.createTextNode(joueur1);
			
			var refJoueur1 = document.createTextNode(joueur1);
			var beginClassementRef = document.createTextNode(beginClassement);
			
			tag.appendChild(beginClassementRef);
			
			tag.classList.add("shadow");
			var element = document.getElementById("Classement");
			element.appendChild(tag);
			document.querySelector(divId).innerHTML = beginClassement;
			}
});       
</script>

</div>

<div id="space" class="space"></div>

</body>

</html>
